/* WooCommerce Quickshop Lite v1.0.1 */
(function(){jQuery(document).ready(function(d){var e=quickshop_params;({init:function(){this.$body=d("body");this.$body.append('<div id="quickshop_overlay"></div>');this.$body.append('<div id="quickshop_loader"><p>'+e.preloader_text+"</p></div>");this.$body.append('<div id="quickshop"><a href="#close" id="quickshop_close">Close</a></div>');this.$overlay=d("#quickshop_overlay").css({background:e.overlay_color,opacity:e.overlay_opacity});this.$loader=d("#quickshop_loader");this.$modal=d("#quickshop"); this.$variationsReset=[];if("ontouchstart"in window||"createTouch"in document)this.isTouch=!0;this.bind()},bind:function(){var b=this;d(".qsl_button").bind("click",function(){b.showModal(this);return!1});d("#quickshop_close").bind("click",function(){b.hideModal();return!1});var a=null;d(window).bind("resize",function(){a&&clearTimeout(a);a=setTimeout(function(){if(b.$modal.is(":hidden"))return!1;b.isTouch||b.centerElement(b.$modal)},100)});b.isTouch&&d(window).bind("orientationchange",function(){b.centerElement(b.$modal)})}, showModal:function(b,a){var c=d(b).attr("data-product_id");c?(a&&this.hideModal(),this.$overlay.show(),this.centerElement(this.$loader),this.$loader.show(),this.$product=this.$modal.children(".product-"+c),this.ajaxLoadProduct(c)):console.log("Quickshop: No product id found.")},hideModal:function(){d("body").trigger("quickshop_hide");this.$modal.hide();this.$modal.css("z-index","");this.$modal.children(".qs_modal_loading").remove();this.$product.remove();this.$overlay.hide();this.$overlay.unbind("click")}, centerElement:function(b){var a=d(document).scrollTop(),c=b.outerHeight(!1),f=d(window).height();f>c+60?(e.modal_offset=30,e.modal_offset_tolerance=140,c=f/2-c/2,f=c/100*e.modal_offset,f<c-e.modal_offset_tolerance&&(c-=f),b.css("top",c+a+"px")):b.css("top",30+a+"px")},ajaxLoadProduct:function(b){var a=this;d.ajax({url:woocommerce_params.ajax_url,data:{action:"quickshop_ajax_load_product",product_id:b},dataType:"json",type:"POST",complete:function(c){c=d.parseJSON(c.responseText);a.$modal.append(c.html); a.$product=a.$modal.children(".product-"+b);a.$product.length||console.log("Quickshop: Product container not found.");a.$modal.css({visibility:"hidden",display:"block"});c.is_variable&&(c.variations&&(window["product_variations_"+c.product_id]=c.variations),a.getVariationElements(),a.$variationsForm.wc_variation_form(),a.$variationsReset.css("visibility","hidden"),a.checkDefaultVariations(),a.$variationsForm.find(".single_variation_wrap").is(":visible")&&a.$product.addClass("no_cache"));e.modal_width&& a.$modal.css({width:e.modal_width+"px",marginLeft:"-"+e.modal_width/2+"px"});e.modal_height&&"auto"!=e.modal_height&&a.$modal.css("height",e.modal_height+"px");setTimeout(function(){a.centerElement(a.$modal);a.$modal.css("visibility","visible");a.$loader.hide();a.$overlay.bind("click",function(){a.hideModal()})},50);a.addQuantityButtons()}})},getVariationElements:function(){this.$variationsForm=this.$product.find(".variations_form");this.$variationsReset=this.$variationsForm.find(".reset_variations")}, checkDefaultVariations:function(){this.$variationsForm.trigger("check_variations")},addQuantityButtons:function(){this.$product.find("div.quantity:not(.buttons_added), td.quantity:not(.buttons_added)").addClass("buttons_added").append('<input type="button" value="+" class="plus" />').prepend('<input type="button" value="-" class="minus" />');this.$product.find("input.qty:not(.product-quantity input.qty)").each(function(){var b=parseInt(d(this).attr("data-min"));b&&(1<b&&parseInt(d(this).val())<b)&& d(this).val(b)})}}).init()})})(jQuery,window);